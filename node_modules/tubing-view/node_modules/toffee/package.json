{
  "name": "toffee",
  "description": "A NodeJs, Express 3.x, Express 2.x, and browser-side templating language based on CoffeeScript with slicker tokens and syntax.",
  "version": "0.1.4",
  "directories": {
    "lib": "./lib"
  },
  "main": "index.js",
  "author": {
    "name": "Chris Coyne",
    "email": "ccoyne77@gmail.com"
  },
  "bin": {
    "toffee": "./bin/toffee"
  },
  "dependencies": {
    "coffee-script": "*",
    "commander": "*",
    "uglify-js": "*",
    "mkdirp": "*"
  },
  "devDependencies": {
    "jison": "*",
    "zombie": "*",
    "assert": "*",
    "express": "*"
  },
  "repository": {
    "type": "git",
    "url": "http://github.com/malgorithms/toffee"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "http://github.com/malgorithms/toffee/raw/master/LICENSE"
    }
  ],
  "readme": "TOFFEE\n=========\n*Toffee* is a templating language developed at OkCupid, based on the simplicity and beauty of CoffeeScript.\n * it works with nodeJS (including Express 2.x and 3.x)\n * it works in the browser, too!\n * it does not require that you use CoffeeScript elsewhere in your project.\n\nTable of Contents\n=================\n   * [1. Language Basics](#section_1)\n   * [2. Notes on Escaping](#section_2)\n   * [3. Common Questions](#section_3)\n   * [4. Installation & Usage (Node, Express, and the browser)](#section_4)\n\n## <a name=\"section_1\"></a> Language Basics\n\nPrinting variables in Toffee is easy. Just use CoffeeScript's #{} syntax:\n```html\n<div class=\"welcome\">\n   Hey, #{user.name}. \n   #{flirty_welcome_msg}\n</div>\n```\n\nThe `#{}` syntax is powerful, so be responsible.\n\n```html\n<p>\n  You have #{(sheep for sheep in flock when sheep.color is 'black').length} black sheep in the flock.\n</p>\n```\n\nIncluding other files is possible thanks to the function `partial`. This works in both Express and the browser.\n\n```html\n<p>\n   #{partial \"navigation.toffee\", {username: user.name, age: 22} }\n</p>\n```\n\nBut the greatest pleasure arises when you enter\n`coffee mode`. Note the `{# ... #}` region, where you can write multiple lines of CoffeeScript.\n\n```html\n<p>\n  {#\n    ten_numbers = [1,3,2,4,5,8,6,7,69, Math.random()]\n    ten_numbers.sort (a,b) -> b - a\n  #}\n  The largest number I can even think of is #{ten_numbers[0]}.\n</p>\n```\n\nAgainst all odds, inside `coffee mode`, you can switch back to `toffee mode` with `{: ... :}`. It's endlessly nestable.\n\n```html\n<div class=\"wrapper\">\n <div class=\"projects\">\n  {#\n     if projects.length\n      for project in projects {:\n        <div class=\"project\">\n          <a href=\"#{project.url}\">#{project.name}</a>\n        </div>\n      :}\n  #}\n </div>\n</div>\n```\n\nThis bracket and nesting syntax avoids a lot of large, ugly regions, such\nas EJS's unethical `<% } %>`. It's been wrong for thousands of years\nto have control markers surrounded by other control\nmarkers, and it is still wrong.  Witness:\n\nEJS, verbose and weak.\n```\n<% for(var i=0; i<supplies.length; i++) {%>\n   <li><%= supplies[i] %></li>\n<% } %>\n```\n\nTOFFEE, so elegant and proud.\n```html\n{# \n  for supply in supplies {:<li>#{supply}</li>:} \n#}\n```\n\nOr, using Toffee's `print`:\n```html\n{# \n  for supply in supplies \n    print \"<li>#{supply}</li>\"\n#}\n```\n\nThese are slightly different, as `print` outputs raw text, while `#{}` used in toffee mode safely escapes HTML or JSON. This escaping\nescaping is customizable. More on that below.\n\nWith nested code, indentation of your CoffeeScript is magically maintained.\n\n```html\n{#\n   if user.is_drunk\n     for name, profile of friends when profile.is_responsible {:\n        <p class=\"designated-driver-candidate\">\n          You know, #{name} would make a great designated driver.\n          And she only lives #{profile.distance}km away.\n          {#\n             if profile.car? {: And wow, she drives a #{profile.car.model} :}\n             else            {: But, alas, she has no wheels. :}\n          #}\n        </p>\n    :}\n#}\n```\n\n### By now, you probably have questions about indenting\n\nSince CoffeeScript is sensitive to indenting, so is Toffee.\n\nBut...Toffee doesn't care where you start your CoffeeScript. When you want to create a coffee block, \nyou can indent it however you like, and all that matters is that the internal, \nrelative indenting is correct. For example, these are identical:\n\n```html\n<p>\n\t{#\n\t      if user.is_awesome {:\n\t        YAY!\n\t      :}\t      \n\t#}\n</p>\n<p>\n{#\nif user.is_awesome {:\n  YAY!\n:}\n#}\n</p>\n```\n\nIn other words, feel free to pick whatever indentation baseline you want when entering a region of CoffeeScript.\n\nNote that where you put your toffee mode tokens (`{:`) is important, as the following illustrates:\n\n```html\n<p>\n {#\n    if x is true\n      if y is true\n        if z is true\n          w = true\n      {: \n      \tx is true! Dunno anything about y or z, though. \n      :}\n #}\n</p>\n```\n\nWhy? Because this is roughly the same as saying:\n\n```html\n<p>\n {#\n    if x is true\n      if y is true\n        if z is true\n          w = true\n      print \"\\n       x is true! Dunno anything about y or z, though.\\n     \"\n #}\n</p>\n```\n\nOne syntactic convenience: if you start a `{:` on the same line as some preceeding CoffeeScript, it's \ntreated the same as putting it on a new line and indenting one level.\nSo the following three conditionals are the same:\n\n```html\n{#\n  if x is true\n    {:yay:}\n#}\n```\n\n```html\n{#\n  if x is true {:yay:}\n#}\n```\n\n```html\n{#\n  if x is true {:\n    yay\n  :}\n#}\n```\n\nThe third example has extra whitespace around the \"yay,\" but otherwise the three are logically identical.\n\n### One gotcha with indenting\n\n\n\nTHIS IS AN ERROR\n```html\n{# if x is 0 {:Yay!:}\n   else      {:Burned:}\n#}\n```\n\nNote that the indentations before the 'if' and the 'else' are technically different,\nas the `if` has only 1 space before it, and the `else` has 2. This is better style anyway:\n\nGOOD\n```html\n{# \n   if x is 0 {:Yay!:}\n   else      {:Burned:}\n#}\n```\n\nWith a single line of CoffeeScript, feel free to keep it all on one line:\n\nGOOD\n```html\n<div>{# foo = \"bar\" #}</div>\n```\n\n\n## Commenting out a block of toffee\n\nIn toffee mode, you can comment out a region with `{##` and `##}`.\n\n```html\n<div>\n I don't want to output this anymore...\n {##\n     <p>An ode to Ruby on Rails</p>\n     <p>#{partial 'ode.toffee'}</p>\n ##}\n</div>\n```\n\n\n## <a name=\"section_2\"></a>Escaping\n\nIn your CoffeeScript, the `print` function lets you print the raw value of a variable:\n\n```\n{#\n  danger_code = \"<script>alert('Eat a bag.');</script>\"\n  print danger_code\n#}\n```\n\nBut in toffee mode, `#{some_expression}` output is escaped intelligently by default:\n\n```html\n<!-- escapes the HTML -->\n<p>#{danger_code}</p>\n```\n\nYou can control the escaping, but here are the defaults: \n\n * if it's a string or scalar, it is escaped for HTML safety.\n * it's an array or object, it is converted to JSON.\n\n### Custom Escaping\n\nYou can bypass the above rules.\n\n * `#{json foo}`: this outputs foo as JSON.\n * `#{raw foo}`: this outputs foo in raw text.\n * `#{html foo}`: this outputs foo, escaped as HTML. For a scalar, it's the same as `#{foo}`, but it's available in case you \n(1) override the default escaping or (2) turn off auto-escaping (both explained below).\n * `#{partial \"foo.toffee\"}` and `#{snippet \"foo.toffee\"}`: unescaped, since you don't want to escape your own templates\n\nWhen any of the functions mentioned above are leftmost in a `#{}` token in toffee mode, their output is left untouched by the \nbuilt in escape function.\n\nThese functions are also available to you in coffee mode.\n\n```html\n<p>\n\tWant to read some JSON, human?\n\t{#\n\t   foo = [1,2,3, {bar: \"none\"}]\n\t   foo_as_json_as_html = html json foo\n\t   print foo_as_json_as_html\n\t#}\n</p>\n```\n\n*Note!*  if you pass a variable to the template called `json`, `raw`, or `html`, Toffee won't create these helper functions, which would override your vars.\nIn this case, you can access the escape functions through their official titles, `__toffee.raw`, etc.\n\nOverriding the default `escape`:\n * If you pass a variable to your template called `escape`, this will be used as the default escape. In toffee mode, everything inside `#{}` that isn't subject to an above-mentioned exception will go through your `escape` function.\n\nTurning off autoescaping entirely:\n * If you set `autoEscape: false` when creating the engine, the default will be raw across your project. (See more on that below under Express 3.x settings.)\n * Alternatively, you could pass the var `escape: (x) -> x` to turn off escaping for a given template.\n\n## <a name=\"section_3\"></a>Common Questions\n\n#### How does it compare to eco?\n\nEco is another CoffeeScript templating language and inspiration for Toffee.\nThe syntaxes are pretty different, so pick the one you prefer.\n\nOne big Toffee advantage: multiple lines of CoffeeScript just look like CoffeeScript. Compare:\n\nECO\n```\n<% if @projects.length: %>\n  <% for project in @projects: %>\n    <% if project.is_active: %>\n      <p><%= project.name %> | <%= project.description %></p>\n    <% end %>\n  <% end %>\n<% end %>\n```\n\nTOFFEE\n```html\n{#\n   if projects.length\n    for project in projects\n      if project.is_active {:\n        <p>#{project.name} | #{project.description}</p>\n      :}\n#}\n```\n\nWith Toffee's syntax, brackets enclose regions not directives, so your editor \nwill let you collapse and expand sections of code. And if you click on one of the brackets in most\neditors, it will highlight the matching bracket.\n\n#### Does it cache templates?\n\nIn Express 2.0, that's up to Express. When used in Express 3.0, Toffee asynchronously monitors known templates and recompiles them in the background when necessary. So you don't need to restart your production webserver whenever you edit a template.\n\n#### Does it find line numbers in errors?\n\nYes, Toffee does a very good job of that. There are 3 possible places you can hit an error in Toffee: \n * in the language itself, say a parse error\n * in the CoffeeScript, preventing it from compiling to JS\n * runtime, in the final JS\n\nStack traces are converted to lines in Toffee and show you where the problem is. \nBy default when Toffee hits an error it replies with some pretty-printed HTML showing you the problem. \nThis can be overridden, as explained below in the Express 3.0 section.\n\n### Does it support partials? (a.k.a includes)\n\nYes.  In Express 2.0, Express itself is responsible for including other files, and they call this system \"partials.\" In Express 3.0 and in the browser, \nToffee defines the `partial` function, and it works as you'd expect. \n\n```html\n<div>#{partial '../foo/bar.toffee', name: \"Chris\"}</div>\n```\n\nInside a region of CoffeeScript, you can print or capture the result of a partial.\n```html\n<div>\n{#\n   if session\n      print partial 'user_menu.toffee', info: session.info\n   else\n      print partial 'guest_menu.toffee'\n#}\n</div>\n```\n\nLike Express's `partial` function, Toffee's function passes all available vars to the child template.\nFor example, in the above code, `session` would also be available in the user_menu.toffee file. If you don't want this scoping, use Toffee's `snippet` function, which sandboxes it:\n\n```\n{#\n   if session\n      print partial 'user.toffee', info: session.info # session will also be passed\n      print snippet 'user.toffee', info: session.info # session will not be passed\n#}\n```\n\n#### Does it support `layout`?\n\nYes, this works in NodeJS and Express 3.0, emulating the Express 2.0 way. The var `layout` is considered special, and should\nbe the path to your layout file.\n\n## <a name=\"section_4\"></a>Installation & Usage\n\n * [Using Toffee in NodeJS](https://github.com/malgorithms/toffee/wiki/NodeJS-Usage)\n * [Using Toffee in Express 3](https://github.com/malgorithms/toffee/wiki/Express3-Usage)\n * [Using Toffee in Express 2](https://github.com/malgorithms/toffee/wiki/Express2-Usage)\n * [Using Toffee in the Browser](https://github.com/malgorithms/toffee/wiki/Browser-Usage)\n\n\ncontributing & asking for fixes.\n=================\nIf you have a problem with Toffee let me know, and I'll fix it ASAP.\n\nAlso, I'm likely to accept good pull requests.\n\nIf you'd like to edit code for this project, note that you should always edit the `.coffee` files,\nas the `.js` files are generated automatically by building.\n\nTo build and test your changes\n\n```\n> cake build\n> cake test\n```\n\n\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/malgorithms/toffee/issues"
  },
  "_id": "toffee@0.1.4",
  "dist": {
    "shasum": "dd54d488f89099c82367ae811ba484f42b6b17c1"
  },
  "_from": "toffee@",
  "_resolved": "https://registry.npmjs.org/toffee/-/toffee-0.1.4.tgz"
}
